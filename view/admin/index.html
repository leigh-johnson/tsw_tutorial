## served on
<%inherit file="../base.html"/>
<%def name="path()">
../
</%def>
<%block name='head'>
${parent.head()}
<link href="${path()+'public/css/style.css'}" rel='stylesheet' type='text/css' />
##<link href="${self.path+'public/css/style.css'}" type="text/css" rel="stylesheet"/>
</%block>

<%block name='menu'>
${parent.menu()}
</%block>
## Select a language

<%block name="content">

<h1>Welcome to the admin panel</h1>
<p>Use tutorial goes here</p>
</%block>
<%block name="footer">
	<h3>Hello $admin</h3>
	<button>Logout</button>
	<%block name="language">
	<fieldset>
	<label for="language">Select lang:</label>
	    <select name="language" id="language">
	      <option value='en'>EN</option>
	      <option value='fr'>FR</option>
	      <option value='de'>DE</option>
	    <option value=None>ALL (TODO)</option>
	    </select>
	    <button id='language_submit'>View</button>
	</fieldset>

	Current lang: ${lang}

	<script type='text/javascript'>
	$( document ).ready(function() {
		// AJAX defaults
		$.ajaxSetup({
			contentType: 'application/json; charset=utf-8',
			dataType: 'text json',
		error: function(data) {
			$('#footer').append('<div class="flash-error">CONNECTION ERROR - PLEASE RESAVE!</div>');
			alert(JSON.stringify(data));		    },
		success: function() {
			$('#footer').append('<div class="flash-success">SAVED ^^V</div>');		
			alert('saved');			       
			}			
		});
		$('#language_submit').click(function(event) {
			lang = $('#language').val();
			var hostname = window.location.hostname

			//request to AdminController.setLang() route
			$.ajax({
				type: 'GET',
				url: '/admin/setLang?lang='+lang,
				success: function(){
					location.reload();
				}
			});
		});
	});
	</script>
	</%block>
	<div>
	Create new:
	<a href="${path()+'admin/new'}"><button>Article</button></a>
	</%block>
	<%block name='scripts'>
	<script type='text/javascript' src='${path()+"public/js/menu.js"}'></script>
	</div>
</%block>