## served on
<%inherit file="../base.html"/>
<%def name="path()">
../
</%def>
<%block name='head'>
${parent.head()}
<link href="${path()+'public/css/reset.css'}" rel='stylesheet' type='text/css' />
<link href="${path()+'public/css/style.css'}" rel='stylesheet' type='text/css' />
<link href="${path()+'public/css/admin.css'}" rel='stylesheet' />
</%block>
<%block name='menu'>
<div id="menu">
<ol>Published

<div class='accordion'>
%for row in categories:
	 ##Top level categories
	%if row.is_category == True & row.public == True & (row.parent_id is None):
	<li class="accordion-header sortable-handle" id="${row._id}"><div><span class="icon-plus"></span><a href="article?_id=${row._id}" data-order="${row.order}">${getattr(row, 'title_'+lang)}</div></a></li>
	<ol>
	##children 
		%for article in row.articles:
			##If child has children
			%if article.is_category == True:
				<div class="accordion">
				<li class="accordion-header sortable-handle" data-order="${article.order}"><div><span class="icon-plus"><a href="article?_id=${article._id}">${getattr(article, 'title_'+lang)}</div></a></li>
				<ol class="sortable">
				%for nested_article in article.articles:
					<li class="sortable-handle" data-order="${nested_article.order}"><div><span class="${article.icon}"></span><a href="article?_id=${nested_article._id}">${getattr(nested_article, 'title_'+lang)}</div></a></li>
				%endfor
				</ol>
				</div>
			%else:
			<li data-order="${article.order}"><span class="${article.icon}"></span><a href="article?_id=${article._id}">${getattr(article, 'title_'+lang)}</a></li>
			%endif
		%endfor
	</ol>
	%endif
%endfor
</div>
</ol>
<ol id="sortable-private" class="sortable">Private
	<li><a href="/admin/new">Create new...</a></li>
	%for row in categories:
		%if row.public == False:
		<li class="sortable-item" id="${row._id}" data-order="${row.order}"><a href="article?_id=${row._id}">${getattr(row, 'title_'+lang)}</a></li>
		%endif
	%endfor
</ol>
</div>
</%block>
## Select a language

<%block name="content">

<h1>Welcome to the admin panel</h1>
<p>Use tutorial goes here</p>
</%block>
<%block name="footer">
	<h3>Hello $admin</h3>
	<button>Logout</button>
	<%block name="language">
	<div class="divider">View Options</div>
	<fieldset>
	<label for="language">Select lang:</label>
	    <select name="language" id="language">
	      <option value='en'>EN</option>
	      <option value='fr'>FR</option>
	      <option value='de'>DE</option>
	    <option value=None>ALL @todo</option>
	    </select>
	    <button id='language_submit'>View</button>
	</fieldset>

	Current lang: ${lang}
	</%block>
	<div>

	<a href="${path()+'admin/new'}"><button>New Article</button></a>
	## Article options

	## Change layout
	<div class="divider">Article Options</div>
	<div class="toggle"><input type="checkbox" value="1" checked></div>
	## Assign to parent
	<div id="article_options">
	<select id="assign_parent">
	<option value="" disabled selected>Assign to Category</option>
	%for row in categories:
		%if row.is_category == True and (row.parent_id is None):
			<option value="${row._id}">${row.title_en}</option>
			%for article in row.articles:
				%if article.is_category == True & (row._id == article.parent_id):
				<option value="${article._id}"> >>${article.title_en}</option>
				%endif
			%endfor
		%endif
	%endfor
	</select>

	<label for="is_category">Is this a category?</label>
	<select id="is_category">
		<option value="" disabled selected></option>
		<option value=0>No</option>
		<option value=1>Yes</option>
	</select>

	<label for="is_public">Publish?</label>
	<select id="is_public">
		<option value="" disabled selected>Publish this article?</option>
		<option value=0>No</option>
		<option value=1>Yes</option>
	</select>


	<div class="divider">Template, Icons</div>
	<label for="set_layout">Choose a template/layout</label>
	<select id="set_layout">
		<option value="" disabled selected>Template</option>
		<option value="default">Text+Imgs</option>
		<option value="video">Video</option>
		<option value="text">Text base</option>
	</select>

	<label for="set_icon">Choose an icon</label>
	<select id="set_icon" style="font-family:'icomoon'; font-size: 1em;"required>
	<option value="icon-file-text">&#xe926;</span></option>
	<option value="icon-file-picture">&#xe927;</option>
	<option value="icon-file-video">&#xe92a;</option>
	</select>

	<div class="divider">LUA, Tags</div>

	<div class="divider">Delete</div>
	<button id="delete_article">Delete</button>
	</div>

	<div class="divider" id="info">Info</div>
	@todo
	Info about this article
	Last edited, current settings, parents, children
	<%block name="error">
	<div id="error"></div>
	</%block>
	</%block>

<%block name='scripts'>
	<script type='text/javascript' src='${path()+"public/js/menu.js"}'></script>
	<script type='text/javascript' src='${path()+"public/js/jquery.switchButton.js"}'></script>
	<script type='text/javascript' src='${path()+ "public/js/jquery.mjs.nestedSortable.js"}'></script>
	<script src="${path()+'public/js/menu-admin.js'}"type='text/javascript'>
	</script>
</%block>
